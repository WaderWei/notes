# 常见问题及解决方案

### 主键使用数字还是UUID

##### 用数字

* 优点
  * 占用存储空间小
  * 效率高（自增）
  * int建立索引比varchar检索速度更快
* 缺点
  * 自增有规律，安全性低
  * 分布式主键可能重复

##### 用UUID

* 优点

  * UUID 可以解决分布式ID不重复，跨服务器合并数据方便。
  * UUID 可以在提交数据库之前就获取，不需要多一个 select 语句
  * 不是所有数据库都支持自增ID
  * `UUID`的性能并不比`自增ID`差很多，这取决于`UUID`的生成算法。

* 缺点

  * 占用存储空间大
  * 效率低

  

uuid：优点

![1570628880127](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570628880127.png)

​		缺点：

![1570628907354](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570628907354.png)

![1570628950259](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570628950259.png)

利用MyCat生成连续的数字主键

![1570628974276](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570628974276.png)

这里建议不论什么情况下都不用uuid。



### 如何在线修改数据表结构

![1570629145359](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629145359.png)

生产环境，千万不要直接修改表结构

![1570629184624](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629184624.png)

**不锁表在线修改表结构**

![1570629251385](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629251385.png)

新建虚拟机实例安装此工具

![1570629310276](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629310276.png)

![1570629378480](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629378480.png)![1570629426539](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629426539.png)![1570629459820](H:\gitwork\notes\VMware\常见问题及解决方案.assets\1570629459820.png)



