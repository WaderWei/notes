# 新零售数据结构设计4

### 设计订单表

> 订单需要两张表存储，一张订单表，一张订单明细表
>
> 这里不建议设计成一张表，即一个订单的多个商品记录用JSON存储，
>
> JSON字段适合存储数据，不适合检索数据

![1570550732420](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550732420.png)

![1570550771393](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550771393.png)



#### 订单详情表

![1570550842665](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550842665.png)

![1570550858336](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550858336.png)



![1570550914386](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550914386.png)

![1570550931394](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570550931394.png)



### 设计员工与用户表

![1570623987395](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570623987395.png)

员工表：所有的员工信息

用户表：能够操作管理系统的用户

注意：这里员工表与用户表个人觉着应该放在一起，通过角色区分，1是维护方便，2是都是公司的员工。



用户与角色也可以设计多对多的关系。

![1570624142411](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624142411.png)

![1570624207475](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624207475.png)

![1570624279227](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624279227.png)![1570624305692](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624305692.png)

### 角色与用户表

![1570624425444](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624425444.png)

![1570624468457](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624468457.png)![1570624520412](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624520412.png)

### 设计快递表与退货表

#### 快递表

![1570624919150](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570624919150.png)

order_id（订单id）非唯一：一个快递表中可以有多个相同的order_id,因为一个订单中可能有多个sku 分多个快递发送。

![1570625088343](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625088343.png)![1570625120561](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625120561.png)

#### 退货表

![1570625251135](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625251135.png)

order_id：非唯一，一个用户购买的商品并不一定一次性全部退完。

![1570625303213](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625303213.png)

#### 快递表数据

![1570625365099](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625365099.png)

sku:[3,3]----代表订单中有两件sku编号为3的商品。

#### 退货表数据

![1570625547644](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625547644.png)



### 设计评价表

![1570625635852](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625635852.png)

![1570625691668](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625691668.png)

![1570625722657](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625722657.png)

### 供应商数据表

![1570625891359](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625891359.png)![1570625979135](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570625979135.png)

##### 供应商与商品是多对多的关系

![1570626012417](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626012417.png)

### 采购表与商品入库表

> 商品采购与入库流程：
>
> 1. 采购员通过新零售系统的进销存模块，选择好仓库，供应商与商品，在数据库中记录下采购的数据，
> 2. 系统通过邮件或微信等方式通知供货商，供货商接到通知以后往某个一个仓库去送货，
> 3. 仓库的管理人员检验商品后做入库处理，然后填写图库单信息保存到数据库。

![1570626404652](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626404652.png)

![1570626594550](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626594550.png)

![1570626643519](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626643519.png)

![1570626700394](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626700394.png)

![1570626716199](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626716199.png)

采购表数据

![1570626738175](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626738175.png)

入库表数据（入库完成，记得将采购表的status更改成完成状态）

![1570626761062](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626761062.png)

采购与入库关联表数据

![1570626769127](H:\gitwork\notes\VMware\新零售数据结构设计4.assets\1570626769127.png)

