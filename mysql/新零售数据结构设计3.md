# 新零售数据结构设计3

### 会员等级表

![1570546912191](.\新零售数据结构设计3.assets\1570546912191.png)

![1570546944781](.\新零售数据结构设计3.assets\1570546944781.png)



### 客户表设计

![1570546997220](.\新零售数据结构设计3.assets\1570546997220.png)

![1570547020090](.\新零售数据结构设计3.assets\1570547020090.png)

### 客户收货地址表

![1570547090705](.\新零售数据结构设计3.assets\1570547090705.png)

prime：是否为默认收货地址

![1570547120412](.\新零售数据结构设计3.assets\1570547120412.png)

### 数据

t_level

![1570547181959](.\新零售数据结构设计3.assets\1570547181959.png)

t_customer

![1570547218191](.\新零售数据结构设计3.assets\1570547218191.png)



### mysql  AES对称加密

![1570547356773](.\新零售数据结构设计3.assets\1570547356773.png)

注意：密钥：用什么加密，就用什么解密，这里是new retail

将加密后的二进制装换成16进制，防止乱码。注意解密时转回二进制。



![1570547997360](.\新零售数据结构设计3.assets\1570547997360.png)

秘钥用username的前6位。





### 购物券表设计

![1570549961112](.\新零售数据结构设计3.assets\1570549961112.png)

这里要设计两张表

1. 一张表记录购物券
2. 一张表记录哪些用户领取了购物券

### 购物券表

![1570550085278](.\新零售数据结构设计3.assets\1570550085278.png)

![1570550099818](.\新零售数据结构设计3.assets\1570550099818.png)



#### 客户关联国务券表

![1570550200482](.\新零售数据结构设计3.assets\1570550200482.png)

![1570550183326](.\新零售数据结构设计3.assets\1570550183326.png)

没有用复合主键的原因：一个用户可以领取多个用一个优惠券

t_voucher  (null不限制领取数量)

![1570550223846](.\新零售数据结构设计3.assets\1570550223846.png)

t_voucher_customer

一种代金券一个用户可以领取多张。



![1570550250792](.\新零售数据结构设计3.assets\1570550250792.png)





